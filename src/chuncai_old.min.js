(function(d,b){var c=function(h,f,i){if(!f){f=h}var e,g;h.mousedown(function(j){e=true;g=a(j)});d(b).mouseup(function(){e=false}).mousemove(function(l){if(!e){return}var j=a(l),k={x:j.x-g.x,y:j.y-g.y};g=j;f.css({left:("+="+k.x+"px").replace("+=-","-="),top:("+="+k.y+"px").replace("+=-","-="),position:"fixed"});i&&i(f.css("left"),f.css("top"))})};function a(f){var g=f||window.event;return{x:g.clientX,y:g.clientY}}d.drag=c})(jQuery,document);$.fn.will=function(b,a){return this.queue(a||"fx",function(c){b.call(this);c()})};(function(a){if(!a.drag){return}a.chuncai=function(c){var d={menu:{key:"你想要做什么呢？","显示公告":function(){this.dynamicSay(this.opt.words[0])},"存活时间":function(){this.dynamicSay("咱已经和主人共同度过了 "+Math.floor((+new Date-1456998485780)/(1000*60*60*24))+"天 的人生了哦~   我是不是很棒呢~")},"拍打喂食":{key:"要来点什么呢？","小饼干":"嗷呜~ 多谢款待  >ω<","胡萝卜":"人家又不是小兔子 QwQ","秋刀鱼":"大哥哥这是什么？呀！好长！诶？！好滑哦(๑• . •๑)！阿呜～","胖次":"哇~ 好可爱的胖次~~~","淡定红茶":"喝完了，ˊ_>ˋ和我签订契约成为淡定少女吧！"},"传送门":{"天天动漫":function(){window.open("http://tiantian.applinzi.com/main.html")},"哔哩哔哩":function(){window.open("http://www.bilibili.com/")},"嘀哩嘀哩":function(){window.open("http://www.dilidili.wang/")}},"隐藏春菜":function(){this.hide()}},words:["为了我们和大家的持续发展，请不要对本站进行任何和谐行为(灬ºωº灬)","咦你想做什么 oAo","「不要啊」你以为我会这么说么噗噗~","一起组团烧烤秋刀鱼","白日依山尽，黄河入海流，欲穷千里目，更上 .. .. 一层楼?","啊啦今天想吃点什么呢~","据说点赞的都找到女朋友了~"]};c&&a.extend(d.menu,c.more);return new b(a.extend({},d,c))};function b(c){this.opt=c;this.inIt()}b.prototype={inIt:function(){this.fill();a.drag(this.ele.children(".chuncai-face"),this.ele,this.savePos);this.bindMenuEvents();this.show()},fill:function(){a('<a class="chuncai-zhaohuan" href="javascript:;">召唤春菜</a>').appendTo(a("body"));var c='<div class="chuncai-main"><div class="chuncai-face chuncai-face-00"><div class="chuncai-face-eye"></div></div><div class="chuncai-chat"><div class="chuncai-word"></div><div class="chuncai-menu"></div><div class="chuncai-menu-btn">menu</div></div></div>';this.ele=a(c);a("body").append(this.ele)},show:function(){if(sessionStorage.chuncai){var d=JSON.parse(sessionStorage.chuncai);this.ele.css({left:d.x,top:d.y})}var c=this;c.ele.find(".chuncai-word").empty();this.ele.fadeIn().will(function(){c.freeSay(1)});a(".chuncai-zhaohuan").hide()},hide:function(){this.dynamicSay("记得叫我出来哦~");this.ele.delay(1000).fadeOut().will(function(){a(".chuncai-zhaohuan").show()})},freeSay:function(d){var c=this;clearInterval(this.freeSayTimer);if(d){c.dynamicSay(c.opt.words[Math.floor(Math.random()*c.opt.words.length)]);c.ele.find(".chuncai-face").attr("class","chuncai-face chuncai-face-0"+Math.floor(Math.random()*3))}this.freeSayTimer=setInterval(function(){c.ele.find(".chuncai-menu").slideUp();c.dynamicSay(c.opt.words[Math.floor(Math.random()*c.opt.words.length)]);c.ele.find(".chuncai-face").attr("class","chuncai-face chuncai-face-0"+Math.floor(Math.random()*3))},10000)},bindMenuEvents:function(){var c=this,d=this.opt,e=c.ele.find(".chuncai-menu");c.ele.find(".chuncai-menu-btn").click(function(){var f=a(this),g=!!c.menuOn;c.menuOn=!g;if(g){c.closeMenu(1)}else{c.fillMenu(d.menu);e.slideDown()}});a(".chuncai-zhaohuan").click(function(){c.show()})},closeMenu:function(c){this.ele.find(".chuncai-menu").slideUp();this.menuOn=false;this.freeSay(c)},fillMenu:function(e){clearInterval(this.freeSayTimer);clearTimeout(this.menuTimer);var c=this;this.menuTimer=setTimeout(function(){c.menuOn&&c.closeMenu(1)},10000);var d=a.type(e);var f={string:function(){this.dynamicSay(e);this.closeMenu()},"function":function(){e.call(this);this.closeMenu()},object:function(){var h=this.ele.find(".chuncai-menu"),g=this;h.slideUp().will(function(){h.empty();a.each(e,function(j,i){if(j=="key"){g.dynamicSay(i);return true}var l=a("<a>"+j+"</a>").click(function(){g.fillMenu(i)});h.append(l)})}).slideDown()}};f[d]&&f[d].call(this)},dynamicSay:function(g){this.ele.stop(true,false);var f=this.ele.find(".chuncai-word"),d=this;for(var e=0,c=g.length;e<c;e++){(function(h){d.ele.will(function(){f.html(g.substr(0,h+1))}).delay(100)})(e)}},savePos:function(c,d){clearTimeout(this.saveTimer);this.saveTimer=setTimeout(function(){sessionStorage.chuncai=JSON.stringify({x:c,y:d})},500)}}})(jQuery);